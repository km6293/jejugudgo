"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[887],{525:function(e,t,a){a.d(t,{Ak:function(){return l},EZ:function(){return i},Md:function(){return d},Ro:function(){return c},ZM:function(){return s},bt:function(){return v},ij:function(){return p},qm:function(){return u}});var n=a(4373);const r={"Content-Type":"application/json"},o=e=>{const t=n.A.isAxiosError(e)&&e.response?e.response.data.errorCode:null;throw{originalError:e,errorCode:t}},u=async(e,t)=>{try{const a="https://jejugudgo.xyz:8080/api/v1/auth/sms/send",o={name:e,phoneNumber:t},u=await n.A.post(a,o,{headers:r});return u.data}catch(a){o(a)}},i=async(e,t,a)=>{try{const o="https://jejugudgo.xyz:8080/api/v1/auth/sms/check",u={name:e,phoneNumber:t,verificationCode:a},i=await n.A.post(o,u,{headers:r});return i.data}catch(u){o(u)}},l=async(e,t)=>{try{const a="https://jejugudgo.xyz:8080/api/v1/auth/sms/send/later",o={name:e,phoneNumber:t},u=await n.A.post(a,o,{headers:r});return u.data}catch(a){o(a)}},s=async e=>{try{const t="https://jejugudgo.xyz:8080/api/v1/auth/authentication/send",a=await n.A.post(t,{email:e},{headers:{"Content-Type":"application/json"}});return a.data}catch(t){const e=n.A.isAxiosError(t)&&t.response?t.response.data.errorCode:null;throw{originalError:t,errorCode:e}}},c=async(e,t)=>{try{const a="https://jejugudgo.xyz:8080/api/v1/auth/authentication/check",o={email:e,authCode:t},u=await n.A.post(a,o,{headers:r});return u.data}catch(a){o(a)}},d=async(e,t)=>{try{const a="https://jejugudgo.xyz:8080/api/v1/auth/find/id",r={name:e,phoneNumber:t},o=await n.A.post(a,r);return o.data}catch(a){o(a)}},v=async(e,t)=>{try{const a="https://jejugudgo.xyz:8080/api/v1/auth/authentication/check/later",r={email:e,authCode:t},o=await n.A.post(a,r);return o.data}catch(a){o(a)}},p=async e=>{try{const t="https://jejugudgo.xyz:8080/api/v1/auth/check/id",a={email:e},r=await n.A.post(t,a);return r.data}catch(t){o(t)}}},887:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});a(4114);var n=a(6768),r=a(144),o=a(1397),u=a(1387),i=a(525),l=a(1810),s=a(5234),c=a(5438);const d=e=>((0,n.Qi)("data-v-8ede3f06"),e=e(),(0,n.jt)(),e),v={class:"find-password-container"},p={class:"find-input"},h=d((()=>(0,n.Lk)("br",null,null,-1))),f=d((()=>(0,n.Lk)("br",null,null,-1))),y=d((()=>(0,n.Lk)("br",null,null,-1)));var m=(0,n.pM)({__name:"FindPasswordByPhone",setup(e){const t=(0,u.rd)(),a=(0,l.I4)(),{inputState:d,inputMessage:m}=(0,s.bP)(a),g=(0,r.Kh)({verificationSent:!1,verificationExpired:!1,verificationStart:null}),b=(0,r.KR)(""),k=(0,r.KR)("default"),j=(0,r.KR)(""),A=(0,r.KR)("default"),w=(0,r.KR)(""),C=(0,r.KR)("default"),R=(0,r.KR)(""),x=(0,r.KR)(""),S=()=>{g.verificationExpired=!0,g.verificationSent=!1,g.verificationStart=null},V=async()=>{if(0===b.value.length)return void(k.value="error");k.value="default";const e=j.value.replace(/-/g,"");if((0,c.Q7)(e)){A.value="default";try{await(0,i.Ak)(b.value,e),g.verificationSent=!0,g.verificationStart=Date.now(),d.value="default",m.value=""}catch(t){const e=t;"INVALID_VALUE_04"===e.errorCode?(d.value="error",m.value="이미 계정이 존재합니다."):"INVALID_VALUE_01"===e.errorCode&&(d.value="error",m.value="휴대폰 번호를 정확히 입력해주세요.")}}else A.value="error"},E=async()=>{if(g.verificationSent)try{const e=j.value.replace(/-/g,"");await(0,i.EZ)(b.value,e,w.value);const a=await(0,i.Md)(b.value,e);x.value=a[0]?.id??"",t.push({name:"find-password-reset",query:{name:b.value,phoneNumber:e,userId:x.value}})}catch(e){const t=e;"AUTH_03"===t.errorCode&&(C.value="error",R.value="인증번호가 틀렸습니다.")}};return(e,t)=>((0,n.uX)(),(0,n.CE)("div",v,[(0,n.Lk)("span",p,[(0,n.bF)((0,r.R1)(o.pd),{placeholder:"이름을 입력해주세요",label:"이름",modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=e=>b.value=e),state:k.value},null,8,["modelValue","state"]),(0,n.bF)((0,r.R1)(o.pd),{placeholder:"010-0000-0000",onInput:(0,r.R1)(c.Y8),maxlength:"13",label:"휴대폰 번호",modelValue:j.value,"onUpdate:modelValue":t[1]||(t[1]=e=>j.value=e),state:(0,r.R1)(d),message:"가입 시 등록한 휴대폰 번호를 입력해주세요"},null,8,["onInput","modelValue","state"]),g.verificationSent?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)((0,r.R1)(o.$n),{key:0,text:"인증번호 받기",onClick:V,style:{backgroundColor:"var(--color-button-secondary)",color:"var(--color-button-on-secondary)",height:"44px",fontSize:"1.4rem"}})),g.verificationSent?((0,n.uX)(),(0,n.Wv)((0,r.R1)(o.pd),{key:1,placeholder:"인증번호 입력",label:"인증번호",modelValue:w.value,"onUpdate:modelValue":t[2]||(t[2]=e=>w.value=e),state:C.value,message:R.value},null,8,["modelValue","state","message"])):(0,n.Q3)("",!0),g.verificationSent?((0,n.uX)(),(0,n.Wv)((0,r.R1)(o.PM),{key:2,verificationStart:g.verificationStart,handleTimeout:S,onResendSms:V},null,8,["verificationStart"])):(0,n.Q3)("",!0)]),h,f,y,g.verificationSent?((0,n.uX)(),(0,n.Wv)((0,r.R1)(o.$n),{key:0,class:"next-button",onClick:E,text:"다음"})):(0,n.Q3)("",!0)]))}}),g=a(1241);const b=(0,g.A)(m,[["__scopeId","data-v-8ede3f06"]]);var k=b}}]);
//# sourceMappingURL=887.2f6434d4.js.map