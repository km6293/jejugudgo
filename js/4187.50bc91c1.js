"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[4187],{4479:function(o,e,t){t.d(e,{N:function(){return a},a:function(){return r}});var n=t(4373);const a=async(o,e,t,a,r,i="출발지",s="도착지")=>{const c={appKey:"jJCpIOodyO74vfAm2r4qt8D6vRQllj3KB6Ixr0j6"};try{const l={startX:o,startY:e,endX:t,endY:a,reqCoordType:"WGS84GEO",resCoordType:"EPSG3857",startName:i,endName:s};r&&""!==r.trim()&&(l.passList=r);const u=await n.A.post("https://apis.openapi.sk.com/tmap/routes/pedestrian?version=1&format=json",l,{headers:c});return u.data.features}catch(l){throw console.error("경로를 가져오는 중 오류 발생:",l),l}},r=async(o,e)=>{try{const t=await n.A.get(`https://apis.openapi.sk.com/tmap/geo/reversegeocoding?version=1&lat=${o}&lon=${e}&format=json&appKey=jJCpIOodyO74vfAm2r4qt8D6vRQllj3KB6Ixr0j6`),a=t.data,r=a?.addressInfo?.fullAddress||"";return r}catch(t){throw console.error("Reverse Geocoding 에러:",t),t}}},9623:function(o,e,t){t.d(e,{k:function(){return u}});t(4114);var n=t(4479),a=t.p+"img/course.41ad5011.svg",r=t.p+"img/end.0fea751a.svg",i=t.p+"img/location.2c3bbc9a.svg",s=t.p+"img/now.84d14ee6.svg",c=t.p+"img/start.7b041b36.svg";const l={course:a,location:i,now:s,start:c,end:r},u=o=>{let e=[],t=[],a=[];const r=window.Tmapv2,i=e=>{if(e.length>0){const t=new r.LatLngBounds;e.forEach((o=>{t.extend(o)})),o.value.fitBounds(t)}else console.error("Zoom 조정할 경로 데이터가 부족합니다.")},s=(e,t,n)=>new r.Polyline({path:e,strokeColor:t,strokeWeight:n,fillOpacity:1,map:o.value,direction:!0,directionColor:"white"}),c=()=>{t.length>0&&(t.forEach((o=>{o&&"function"===typeof o.setVisible&&o.setVisible(!1)})),t=[])},u=()=>{a.forEach((o=>o.setMap(null))),a=[]},d=o=>{const e=o.length,n=10,a=["#75FFA5","#22F779","#13D168","#07AB56","#008545"];a.forEach(((a,r)=>{const i=Math.floor(e*(.2*r)),c=Math.floor(e*(.2*(r+1))),l=o.slice(i,c+1),u=s(l,a,n);t.push(u)})),i(o)},p=()=>new Promise(((o,e)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{o(e)}),(o=>{o.code===o.PERMISSION_DENIED?(alert("위치 권한이 거부되었습니다. 앱 설정에서 권한을 허용해 주세요."),e("위치 권한이 거부되었습니다.")):e("위치를 가져오는 데 실패했습니다.")})):e("이 브라우저는 위치 서비스를 지원하지 않습니다.")})),g=o=>new Promise(((e,t)=>{o.value?t("지도 객체 초기화 실패: 이미 초기화된 상태입니다."):(o.value=new r.Map("map_div",{width:"100%",height:"100%",zoom:15,scaleBar:!1,zoomControl:!1,httpsMode:!0}),e())})),v=e=>{const{latitude:t,longitude:n}=e;if(!o.value||0===t||0===n)return;const r=a.findIndex((o=>o.getPosition().lat()===t&&o.getPosition().lng()===n));-1!==r?(a[r].setMap(null),a.splice(r,1)):console.log("해당 위치에 마커가 없습니다.")},h=e=>{const{latitude:t,longitude:n}=e;return!!(t&&n&&o.value)&&a.some((o=>o.getPosition().lat()===t&&o.getPosition().lng()===n))},m=(e,t)=>{const{latitude:n,longitude:i}=e;if(!o.value||0===n||0===i)return;const s=new r.LatLng(n,i),c=new r.Marker({position:s,icon:l[t],map:o.value});return a.push(c),c},f=async(o,t,a)=>{try{c();const i=a?a.map((o=>`${o.longitude},${o.latitude}`)).join("_"):"",s=await(0,n.N)(String(o.longitude),String(o.latitude),String(t.longitude),String(t.latitude),i);e=[],s.forEach((o=>{const t=o.geometry;o.properties;"LineString"===t.type&&t.coordinates.forEach((o=>{const t=new r.Point(o[0],o[1]),n=r.Projection.convertEPSG3857ToWGS84GEO(t),a=new r.LatLng(n._lat,n._lng);e.push(a)}))})),d(e)}catch(i){console.error("경로 검색 중 오류 발생:",i)}},w=async o=>{const a=[33.433944015499456,126.43602130714433],i=[33.45120886113757,126.48765563964844],s="126.39573248492509,33.47190207955216_126.44226001173622,33.47486469122896_126.42766879469521,33.48001928930712";try{const c=await(0,n.N)(String(a[1]),String(a[0]),String(i[1]),String(i[0]),s);t.length>0&&(t.forEach((o=>o.setMap(null))),t=[]),e=[],c.forEach((t=>{const n=t.geometry,a=t.properties;if("LineString"===n.type)n.coordinates.forEach((o=>{const t=new r.Point(o[0],o[1]),n=r.Projection.convertEPSG3857ToWGS84GEO(t),a=new r.LatLng(n._lat,n._lng);e.push(a)}));else if("GP"!==a.pointType&&a.pointType.includes("PP")){const e=new r.Point(n.coordinates[0],n.coordinates[1]),t=r.Projection.convertEPSG3857ToWGS84GEO(e);new r.Marker({position:new r.LatLng(t._lat,t._lng),icon:l["location"],map:o.value})}})),d(e)}catch(c){console.error("경로 검색 중 오류 발생:",c)}},y=(e,t)=>{if(o.value)if(isNaN(e)||isNaN(t))console.error("유효하지 않은 좌표:",e,t);else{const n=new r.LatLng(e,t);o.value.setCenter(n),o.value.setZoom(15)}},k=async()=>{try{const e=await p(),{latitude:t,longitude:n}=e.coords,a=new r.LatLng(t,n);new r.Marker({position:a,icon:l["now"],map:o.value}),y(t,n)}catch(e){console.error(e),alert("현재 위치를 가져오는 데 실패했습니다.");const o=33.50712081595116,t=126.49340629577637;y(o,t)}};return{initTmap:g,removeMarker:v,searchRoutes:f,addMarker:m,clearMarkers:u,checkDuplMarker:h,moveLocation:y,moveNowLocation:k,searchRoutesTest:w}}},1645:function(o,e,t){t.r(e),t.d(e,{default:function(){return y}});t(4114);var n=t(6768),a=t(144),r=t(4232),i=t(8606),s=t(9623),c=t(2893);const l=o=>((0,n.Qi)("data-v-e45b206e"),o=o(),(0,n.jt)(),o),u={class:"container"},d={class:"search-container"},p={key:0,class:"tags-container"},g=l((()=>(0,n.Lk)("div",{id:"map_div"},null,-1))),v={class:"map-button"},h={class:"course-button"};var m=(0,n.pM)({__name:"SearchCourse",setup(o){const e=(0,a.KR)(null),t=(0,a.KR)(!0),{initTmap:l,searchRoutesTest:m,moveNowLocation:f}=(0,s.k)(e);(0,n.sV)((async()=>{await l(e),await f()}));const w=o=>{console.log(o)},y=()=>{f()},k=()=>{m(e)},L=()=>{c.A.push({name:"create-course"})},S=async()=>{t.value=!t.value,await(0,n.dY)(),e.value&&e.value.resize()},b={backgroundColor:"var(--color-button-secondary)",color:"var(--color-button-on-secondary)",width:"48px",height:"48px",fontSize:"1.4rem"},E={backgroundColor:"var(--color-button-secondary)",color:"var(--color-button-on-secondary)",height:"48px",width:"156px",fontSize:"1.4rem"},P={width:"158px",height:"44px",fontSize:"1.4rem"};return(o,e)=>((0,n.uX)(),(0,n.CE)("div",u,[(0,n.Lk)("header",null,[(0,n.Lk)("div",d,[(0,n.bF)((0,a.R1)(i.vj),{onSearch:w})]),t.value?((0,n.uX)(),(0,n.CE)("div",p,[(0,n.bF)((0,a.R1)(i.YD))])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",{class:(0,r.C4)(["search-map",{"expanded-map":!t.value}])},[g,(0,n.Lk)("div",v,[(0,n.bF)((0,a.R1)(i.$n),{icon:(0,a.R1)(i.dS),style:b,onClick:y},null,8,["icon"]),(0,n.Lk)("div",h,[(0,n.bF)((0,a.R1)(i.$n),{text:"주변코스 검색",icon:(0,a.R1)(i.WI),style:E,onClick:k},null,8,["icon"]),(0,n.bF)((0,a.R1)(i.$n),{text:"코스 생성하기",icon:(0,a.R1)(i.uQ),style:P,onClick:L},null,8,["icon"])]),(0,n.bF)((0,a.R1)(i.$n),{text:"토글 태그",style:P,onClick:S})])],2)]))}}),f=t(1241);const w=(0,f.A)(m,[["__scopeId","data-v-e45b206e"]]);var y=w}}]);
//# sourceMappingURL=4187.50bc91c1.js.map