"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[9476],{525:function(e,t,a){a.d(t,{Ak:function(){return i},EZ:function(){return u},Md:function(){return d},Ro:function(){return s},ZM:function(){return c},bt:function(){return v},ij:function(){return h},qm:function(){return l}});var n=a(4373);const r={"Content-Type":"application/json"},o=e=>{const t=n.A.isAxiosError(e)&&e.response?e.response.data.errorCode:null;throw{originalError:e,errorCode:t}},l=async(e,t)=>{try{const a="http://localhost:8080/api/v1/auth/sms/send",o={name:e,phoneNumber:t},l=await n.A.post(a,o,{headers:r});return l.data}catch(a){o(a)}},u=async(e,t,a)=>{try{const o="http://localhost:8080/api/v1/auth/sms/check",l={name:e,phoneNumber:t,verificationCode:a},u=await n.A.post(o,l,{headers:r});return u.data}catch(l){o(l)}},i=async(e,t)=>{try{const a="http://localhost:8080/api/v1/auth/sms/send/later",o={name:e,phoneNumber:t},l=await n.A.post(a,o,{headers:r});return l.data}catch(a){o(a)}},c=async e=>{try{const t="http://localhost:8080/api/v1/auth/authentication/send",a=await n.A.post(t,{email:e},{headers:{"Content-Type":"application/json"}});return a.data}catch(t){const e=n.A.isAxiosError(t)&&t.response?t.response.data.errorCode:null;throw{originalError:t,errorCode:e}}},s=async(e,t)=>{try{const a="http://localhost:8080/api/v1/auth/authentication/check",o={email:e,authCode:t},l=await n.A.post(a,o,{headers:r});return l.data}catch(a){o(a)}},d=async(e,t)=>{try{const a="http://localhost:8080/api/v1/auth/find/id",r={name:e,phoneNumber:t},o=await n.A.post(a,r);return o.data}catch(a){o(a)}},v=async(e,t)=>{try{const a="http://localhost:8080/api/v1/auth/authentication/check/later",r={email:e,authCode:t},o=await n.A.post(a,r);return o.data}catch(a){o(a)}},h=async e=>{try{const t="http://localhost:8080/api/v1/auth/check/id",a={email:e},r=await n.A.post(t,a);return r.data}catch(t){o(t)}}},9476:function(e,t,a){a.r(t),a.d(t,{default:function(){return A}});a(4114);var n=a(6768),r=a(144),o=a(8606),l=a(1387),u=a(525),i=a(1810),c=a(5234),s=a(5438);const d=e=>((0,n.Qi)("data-v-d3d2fec6"),e=e(),(0,n.jt)(),e),v={class:"find-password-container"},h={class:"find-input"},p=d((()=>(0,n.Lk)("br",null,null,-1))),f=d((()=>(0,n.Lk)("br",null,null,-1))),m=d((()=>(0,n.Lk)("br",null,null,-1)));var y=(0,n.pM)({__name:"FindPasswordByPhone",setup(e){const t=(0,l.rd)(),a=(0,i.I4)(),{inputState:d,inputMessage:y}=(0,c.bP)(a),b=(0,r.Kh)({verificationSent:!1,verificationExpired:!1,verificationStart:null}),k=(0,r.KR)(""),A=(0,r.KR)("default"),w=(0,r.KR)(""),C=(0,r.KR)("default"),R=(0,r.KR)(""),S=(0,r.KR)("default"),V=(0,r.KR)(""),g=(0,r.KR)(""),E=()=>{b.verificationExpired=!0,b.verificationSent=!1,b.verificationStart=null},x=async()=>{if(0===k.value.length)return void(A.value="error");A.value="default";const e=w.value.replace(/-/g,"");if((0,s.Q7)(e)){C.value="default";try{await(0,u.Ak)(k.value,e),b.verificationSent=!0,b.verificationStart=Date.now(),d.value="default",y.value=""}catch(t){const e=t;"INVALID_VALUE_04"===e.errorCode?(d.value="error",y.value="이미 계정이 존재합니다."):"INVALID_VALUE_01"===e.errorCode&&(d.value="error",y.value="휴대폰 번호를 정확히 입력해주세요.")}}else C.value="error"},I=async()=>{if(b.verificationSent)try{const e=w.value.replace(/-/g,"");await(0,u.EZ)(k.value,e,R.value);const a=await(0,u.Md)(k.value,e);g.value=a[0]?.id??"",t.push({name:"find-password-reset",query:{name:k.value,phoneNumber:e,userId:g.value}})}catch(e){const t=e;"AUTH_03"===t.errorCode&&(S.value="error",V.value="인증번호가 틀렸습니다.")}};return(e,t)=>((0,n.uX)(),(0,n.CE)("div",v,[(0,n.Lk)("span",h,[(0,n.bF)((0,r.R1)(o.pd),{placeholder:"이름을 입력해주세요",label:"이름",modelValue:k.value,"onUpdate:modelValue":t[0]||(t[0]=e=>k.value=e),state:A.value},null,8,["modelValue","state"]),(0,n.bF)((0,r.R1)(o.pd),{placeholder:"010-0000-0000",onInput:(0,r.R1)(s.Y8),maxlength:"13",label:"휴대폰 번호",modelValue:w.value,"onUpdate:modelValue":t[1]||(t[1]=e=>w.value=e),state:(0,r.R1)(d),message:"가입 시 등록한 휴대폰 번호를 입력해주세요"},null,8,["onInput","modelValue","state"]),b.verificationSent?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)((0,r.R1)(o.$n),{key:0,text:"인증번호 받기",onClick:x,style:{backgroundColor:"var(--color-button-secondary)",color:"var(--color-button-on-secondary)",height:"44px",fontSize:"1.4rem"}})),b.verificationSent?((0,n.uX)(),(0,n.Wv)((0,r.R1)(o.pd),{key:1,placeholder:"인증번호 입력",label:"인증번호",modelValue:R.value,"onUpdate:modelValue":t[2]||(t[2]=e=>R.value=e),state:S.value,message:V.value},null,8,["modelValue","state","message"])):(0,n.Q3)("",!0),b.verificationSent?((0,n.uX)(),(0,n.Wv)((0,r.R1)(o.PM),{key:2,verificationStart:b.verificationStart,handleTimeout:E,onResendSms:x},null,8,["verificationStart"])):(0,n.Q3)("",!0)]),p,f,m,b.verificationSent?((0,n.uX)(),(0,n.Wv)((0,r.R1)(o.$n),{key:0,class:"next-button",onClick:I,text:"다음"})):(0,n.Q3)("",!0)]))}}),b=a(1241);const k=(0,b.A)(y,[["__scopeId","data-v-d3d2fec6"]]);var A=k}}]);
//# sourceMappingURL=9476.497ed6f8.js.map