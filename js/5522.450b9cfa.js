"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[5522],{2053:function(e,t,i){i.r(t),i.d(t,{default:function(){return V}});i(4114);var n=i(6768),a=i(4232),c=i(144),s=i(5130),o=i.p+"img/Edit Icon.1da94c87.svg",d=i.p+"img/Delete Icon.2393363f.svg",l=i(2628),u=i(1397),h=i(4373);const k=e=>((0,n.Qi)("data-v-885e6682"),e=e(),(0,n.jt)(),e),m={class:"check-list-container"},g={class:"check-list"},r=["onClick"],p={key:0,class:"list-detail body1-regular"},v=["onUpdate:modelValue","onKeyup","onBlur"],w={key:1,class:"list-detail body1-regular"},y=["onClick"],C=k((()=>(0,n.Lk)("i",{class:"fa-solid fa-ellipsis fa-2xs"},null,-1))),A=[C],f={key:3,class:"action-buttons"},N=["onClick"],b=k((()=>(0,n.Lk)("img",{src:o,alt:"Edit",width:"24px",height:"24px"},null,-1))),E=[b],L=["onClick"],x=k((()=>(0,n.Lk)("img",{src:d,alt:"Delete",width:"24px",height:"24px"},null,-1))),R=[x],X={key:0,class:"list-content"},K=k((()=>(0,n.Lk)("div",{class:"list-check"},null,-1))),j=k((()=>(0,n.Lk)("div",{class:"add-title body2-bold"},"항목 추가",-1)));var $=(0,n.pM)({__name:"CheckList",setup(e){const t=[{name:"등산화",checked:!1,showActions:!1,editing:!1,editingName:""},{name:"모자",checked:!1,showActions:!1,editing:!1,editingName:""},{name:"우비",checked:!1,showActions:!1,editing:!1,editingName:""},{name:"배낭",checked:!1,showActions:!1,editing:!1,editingName:""},{name:"생수",checked:!1,showActions:!1,editing:!1,editingName:""},{name:"가벼운 구급약",checked:!1,showActions:!1,editing:!1,editingName:""},{name:"랜턴",checked:!1,showActions:!1,editing:!1,editingName:""},{name:"선글라스",checked:!1,showActions:!1,editing:!1,editingName:""},{name:"간식",checked:!1,showActions:!1,editing:!1,editingName:""},{name:"잠옷",checked:!1,showActions:!1,editing:!1,editingName:""}],i=(0,c.KR)([...t]),o=(0,c.KR)(""),d=(0,c.KR)(!1),k=async e=>{i.value[e].checked=!i.value[e].checked,await z()};(0,n.sV)((async()=>{try{const e=(0,l.Ri)("Authorization"),n="CHECK",a=await h.A.get("https://jejugudgo.xyz:8080/api/v1/todo",{params:{type:n},headers:{Authorization:`Bearer ${e}`}}),c=a.data.reduce(((e,t)=>t.id>e.id?t:e),a.data[0]);if(null!==c){const e=[],t=c.content.split(", ");for(let i=0;i<t.length;i++){const n=t[i],[a,c]=n.split(": ");e.push({name:a.trim(),checked:"true"===c,showActions:!1,editing:!1,editingName:""})}i.value=e}else i.value=[...t]}catch(e){i.value=[...t]}}));const C=async()=>{if(""!==o.value.trim()){const e={name:o.value,checked:!1,showActions:!1,editing:!1,editingName:""};i.value.push(e),await z(),o.value="",d.value=!1}},b=e=>{i.value.forEach(((t,i)=>{i!==e&&(t.showActions=!1)})),i.value[e].showActions=!i.value[e].showActions},x=e=>{const t=i.value[e];t.editingName=t.name,t.editing=!0,t.showActions=!1,setTimeout((()=>{const t=document.querySelector(`.edit-item-input-${e}`);t&&t.focus()}),0)},$=async e=>{const t=i.value[e];""!==t.editingName.trim()&&(t.name=t.editingName),t.editing=!1,t.showActions=!1,await z()},z=async()=>{const e=i.value.map((e=>`${e.name}: ${e.checked}`)).join(", "),t={type:"CHECK",content:e};try{const e=(0,l.Ri)("Authorization");await h.A.post("https://jejugudgo.xyz:8080/api/v1/todo",t,{headers:{Authorization:`Bearer ${e}`}})}catch(n){console.error("Failed to save items:",n)}},Q=async e=>{i.value.splice(e,1),await z()};return(e,t)=>((0,n.uX)(),(0,n.CE)("div",m,[(0,n.Lk)("div",g,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.value,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:(0,a.C4)(["list-content",{"editing-active":e.editing}])},[(0,n.Lk)("div",{class:(0,a.C4)(["list-check",{active:e.checked}]),onClick:e=>k(t)},[e.checked?((0,n.uX)(),(0,n.Wv)((0,c.R1)(u.VT),{key:0,active:!0,width:"18px",height:"18px"})):(0,n.Q3)("",!0)],10,r),e.editing?((0,n.uX)(),(0,n.CE)("div",p,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t=>e.editingName=t,type:"text",class:(0,a.C4)(["edit-item-input","transparent-input",`edit-item-input-${t}`]),onKeyup:(0,s.jR)((e=>$(t)),["enter"]),onBlur:e=>$(t),autofocus:""},null,42,v),[[s.Jo,e.editingName]])])):((0,n.uX)(),(0,n.CE)("div",w,(0,a.v_)(e.name),1)),e.editing||e.showActions?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:2,class:"menu-button",onClick:e=>b(t)},A,8,y)),e.showActions&&!e.editing?((0,n.uX)(),(0,n.CE)("div",f,[(0,n.Lk)("button",{onClick:(0,s.D$)((e=>x(t)),["stop"]),class:"edit-button"},E,8,N),(0,n.Lk)("button",{onClick:(0,s.D$)((e=>Q(t)),["stop"]),class:"delete-button"},R,8,L)])):(0,n.Q3)("",!0)],2)))),128)),d.value?((0,n.uX)(),(0,n.CE)("div",X,[K,(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),type:"text",placeholder:"새 항목 입력",onKeyup:(0,s.jR)(C,["enter"]),class:"add-item-input transparent-input",autofocus:""},null,544),[[s.Jo,o.value]])])):(0,n.Q3)("",!0)]),d.value?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:0,class:"add-list",onClick:t[1]||(t[1]=e=>d.value=!0)},[(0,n.bF)((0,c.R1)(u.RE)),j]))]))}}),z=i(1241);const Q=(0,z.A)($,[["__scopeId","data-v-885e6682"]]);var V=Q}}]);
//# sourceMappingURL=5522.450b9cfa.js.map