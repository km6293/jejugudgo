"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[2750,9838],{9623:function(e,t,o){o.d(t,{k:function(){return u}});o(4114);var n=o(132),a=o.p+"img/course.41ad5011.svg",i=o.p+"img/end.0fea751a.svg",r=o.p+"img/location.2c3bbc9a.svg",l=o.p+"img/now.84d14ee6.svg",s=o.p+"img/start.7b041b36.svg";const c={course:a,location:r,now:l,start:s,end:i},u=e=>{let t=[],o=[],a=[];const i=window.Tmapv2,r=t=>{if(t.length>0){const o=new i.LatLngBounds;t.forEach((e=>{o.extend(e)})),e.value.fitBounds(o)}else console.error("Zoom 조정할 경로 데이터가 부족합니다.")},l=(t,o,n)=>new i.Polyline({path:t,strokeColor:o,strokeWeight:n,fillOpacity:1,map:e.value,direction:!0,directionColor:"white"}),s=()=>{o.length>0&&(o.forEach((e=>{e&&"function"===typeof e.setVisible&&e.setVisible(!1)})),o=[])},u=()=>{a.forEach((e=>e.setMap(null))),a=[]},d=e=>{const t=e.length,n=10,a=["#75FFA5","#22F779","#13D168","#07AB56","#008545"];a.forEach(((a,i)=>{const r=Math.floor(t*(.2*i)),s=Math.floor(t*(.2*(i+1))),c=e.slice(r,s+1),u=l(c,a,n);o.push(u)})),r(e)},g=()=>new Promise(((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((t=>{e(t)}),(e=>{e.code===e.PERMISSION_DENIED?(alert("위치 권한이 거부되었습니다. 앱 설정에서 권한을 허용해 주세요."),t("위치 권한이 거부되었습니다.")):t("위치를 가져오는 데 실패했습니다.")})):t("이 브라우저는 위치 서비스를 지원하지 않습니다.")})),v=e=>new Promise(((t,o)=>{e.value?o("지도 객체 초기화 실패: 이미 초기화된 상태입니다."):(e.value=new i.Map("map_div",{width:"100%",height:"100%",zoom:15,scaleBar:!1,zoomControl:!1,httpsMode:!0}),t())})),p=t=>{const{latitude:o,longitude:n}=t;if(!e.value||0===o||0===n)return;const i=a.findIndex((e=>e.getPosition().lat()===o&&e.getPosition().lng()===n));-1!==i?(a[i].setMap(null),a.splice(i,1)):console.log("해당 위치에 마커가 없습니다.")},h=t=>{const{latitude:o,longitude:n}=t;return!!(o&&n&&e.value)&&a.some((e=>e.getPosition().lat()===o&&e.getPosition().lng()===n))},w=(t,o)=>{const{latitude:n,longitude:r}=t;if(!e.value||0===n||0===r)return;const l=new i.LatLng(n,r),s=new i.Marker({position:l,icon:c[o],map:e.value});return a.push(s),s},f=async(e,o,a)=>{try{s();const r=a?a.map((e=>`${e.longitude},${e.latitude}`)).join("_"):"",l=await(0,n.N7)(String(e.longitude),String(e.latitude),String(o.longitude),String(o.latitude),r);t=[],l.forEach((e=>{const o=e.geometry;e.properties;"LineString"===o.type&&o.coordinates.forEach((e=>{const o=new i.Point(e[0],e[1]),n=i.Projection.convertEPSG3857ToWGS84GEO(o),a=new i.LatLng(n._lat,n._lng);t.push(a)}))})),d(t)}catch(r){console.error("경로 검색 중 오류 발생:",r)}},m=async e=>{const a=[33.433944015499456,126.43602130714433],r=[33.45120886113757,126.48765563964844],l="126.39573248492509,33.47190207955216_126.44226001173622,33.47486469122896_126.42766879469521,33.48001928930712";try{const s=await(0,n.N7)(String(a[1]),String(a[0]),String(r[1]),String(r[0]),l);o.length>0&&(o.forEach((e=>e.setMap(null))),o=[]),t=[],s.forEach((o=>{const n=o.geometry,a=o.properties;if("LineString"===n.type)n.coordinates.forEach((e=>{const o=new i.Point(e[0],e[1]),n=i.Projection.convertEPSG3857ToWGS84GEO(o),a=new i.LatLng(n._lat,n._lng);t.push(a)}));else if("GP"!==a.pointType&&a.pointType.includes("PP")){const t=new i.Point(n.coordinates[0],n.coordinates[1]),o=i.Projection.convertEPSG3857ToWGS84GEO(t);new i.Marker({position:new i.LatLng(o._lat,o._lng),icon:c["location"],map:e.value})}})),d(t)}catch(s){console.error("경로 검색 중 오류 발생:",s)}},P=(t,o)=>{if(e.value)if(isNaN(t)||isNaN(o))console.error("유효하지 않은 좌표:",t,o);else{const n=new i.LatLng(t,o);e.value.setCenter(n),e.value.setZoom(15)}},k=async()=>{try{const t=await g(),{latitude:o,longitude:n}=t.coords,a=new i.LatLng(o,n);new i.Marker({position:a,icon:c["now"],map:e.value}),P(o,n)}catch(t){console.error(t),alert("현재 위치를 가져오는 데 실패했습니다.");const e=33.50712081595116,o=126.49340629577637;P(e,o)}};return{initTmap:v,removeMarker:p,searchRoutes:f,addMarker:w,clearMarkers:u,checkDuplMarker:h,moveLocation:P,moveNowLocation:k,searchRoutesTest:m}}},119:function(e,t,o){o.r(t),o.d(t,{default:function(){return w}});var n=o(6768),a=o(144),i=o(9623),r=o(1397),l=o(2098),s=o(5234),c=o(6884);const u=e=>((0,n.Qi)("data-v-3024e6c6"),e=e(),(0,n.jt)(),e),d={class:"container"},g=u((()=>(0,n.Lk)("div",{id:"map_div"},null,-1)));var v=(0,n.pM)({__name:"CreateCourse",setup(e){const t=(0,c._)(),{page:o,showSearch:u,startPointValid:v,endPointValid:p,wayPointsValid:h,wayPoint:w,endPoint:f,startPoint:m}=(0,s.bP)(t),P=(0,a.KR)(null),{initTmap:k,addMarker:y,searchRoutes:L,removeMarker:E,checkDuplMarker:S,moveNowLocation:M}=(0,i.k)(P),_={1:l.gu,2:l.JL,3:l.SC,4:l.sg,5:l.rc,11:l.xC,12:l.wf};(0,n.sV)((async()=>{await k(P),await M()}));const C=(e,t,o)=>{if(e&&v.value){const t=S(e);t||y(e,o)}!t||e.name===t.name&&e.longitude===t.longitude&&e.latitude===t.latitude||E(t)},R=()=>{v.value&&p.value&&h.value&&L(m.value,f.value,w.value)};return(0,n.wB)((()=>m.value),((e,t)=>{C(e,t,"start")}),{deep:!0}),(0,n.wB)((()=>f.value),((e,t)=>{C(e,t,"end")}),{deep:!0}),(0,n.wB)((()=>[...w.value]),((e,t)=>{if(e.forEach(((e,o)=>{const n=t[o];C(e,n,"location")})),e.length<t.length)for(let o=e.length;o<t.length;o++)E(t[o])}),{deep:!0}),(0,n.wB)((()=>[w.value,m.value,f.value]),R,{deep:!0}),(e,t)=>((0,n.uX)(),(0,n.CE)("div",d,[(0,a.R1)(u)?((0,n.uX)(),(0,n.Wv)((0,a.R1)(l.V0),{key:0})):(0,n.Q3)("",!0),g,(0,n.bF)((0,a.R1)(r.o),null,{default:(0,n.k6)((()=>[(0,a.R1)(u)?((0,n.uX)(),(0,n.Wv)((0,a.R1)(l.q0),{key:0})):_[(0,a.R1)(o)]?((0,n.uX)(),(0,n.Wv)((0,n.$y)(_[(0,a.R1)(o)]),{key:1})):(0,n.Q3)("",!0)])),_:1})]))}}),p=o(1241);const h=(0,p.A)(v,[["__scopeId","data-v-3024e6c6"]]);var w=h}}]);
//# sourceMappingURL=2750.92eb8cb7.js.map