"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[7052,6754],{4479:function(t,e,o){o.d(e,{N:function(){return r},a:function(){return a}});var n=o(4373);const r=async(t,e,o,r,a,i="출발지",s="도착지")=>{const c={appKey:"jJCpIOodyO74vfAm2r4qt8D6vRQllj3KB6Ixr0j6"};try{const l={startX:t,startY:e,endX:o,endY:r,reqCoordType:"WGS84GEO",resCoordType:"EPSG3857",startName:i,endName:s};a&&""!==a.trim()&&(l.passList=a);const u=await n.A.post("https://apis.openapi.sk.com/tmap/routes/pedestrian?version=1&format=json",l,{headers:c});return u.data.features}catch(l){throw console.error("경로를 가져오는 중 오류 발생:",l),l}},a=async(t,e)=>{try{const o=await n.A.get(`https://apis.openapi.sk.com/tmap/geo/reversegeocoding?version=1&lat=${t}&lon=${e}&format=json&appKey=jJCpIOodyO74vfAm2r4qt8D6vRQllj3KB6Ixr0j6`),r=o.data,a=r?.addressInfo?.fullAddress||"";return a}catch(o){throw console.error("Reverse Geocoding 에러:",o),o}}},9623:function(t,e,o){o.d(e,{k:function(){return u}});o(4114);var n=o(4479),r=o.p+"img/course.41ad5011.svg",a=o.p+"img/end.0fea751a.svg",i=o.p+"img/location.2c3bbc9a.svg",s=o.p+"img/now.84d14ee6.svg",c=o.p+"img/start.7b041b36.svg";const l={course:r,location:i,now:s,start:c,end:a},u=t=>{let e=[],o=[],r=[];const a=window.Tmapv2,i=e=>{if(e.length>0){const o=new a.LatLngBounds;e.forEach((t=>{o.extend(t)})),t.value.fitBounds(o)}else console.error("Zoom 조정할 경로 데이터가 부족합니다.")},s=(e,o,n)=>new a.Polyline({path:e,strokeColor:o,strokeWeight:n,fillOpacity:1,map:t.value,direction:!0,directionColor:"white"}),c=()=>{o.length>0&&(o.forEach((t=>{t&&"function"===typeof t.setVisible&&t.setVisible(!1)})),o=[])},u=()=>{r.forEach((t=>t.setMap(null))),r=[]},d=t=>{const e=t.length,n=10,r=["#75FFA5","#22F779","#13D168","#07AB56","#008545"];r.forEach(((r,a)=>{const i=Math.floor(e*(.2*a)),c=Math.floor(e*(.2*(a+1))),l=t.slice(i,c+1),u=s(l,r,n);o.push(u)})),i(t)},p=()=>new Promise(((t,e)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{t(e)}),(t=>{t.code===t.PERMISSION_DENIED?(alert("위치 권한이 거부되었습니다. 앱 설정에서 권한을 허용해 주세요."),e("위치 권한이 거부되었습니다.")):e("위치를 가져오는 데 실패했습니다.")})):e("이 브라우저는 위치 서비스를 지원하지 않습니다.")})),g=t=>new Promise(((e,o)=>{t.value?o("지도 객체 초기화 실패: 이미 초기화된 상태입니다."):(t.value=new a.Map("map_div",{width:"100%",height:"100%",zoom:15,scaleBar:!1,zoomControl:!1,httpsMode:!0}),e())})),v=e=>{const{latitude:o,longitude:n}=e;if(!t.value||0===o||0===n)return;const a=r.findIndex((t=>t.getPosition().lat()===o&&t.getPosition().lng()===n));-1!==a?(r[a].setMap(null),r.splice(a,1)):console.log("해당 위치에 마커가 없습니다.")},f=e=>{const{latitude:o,longitude:n}=e;return!!(o&&n&&t.value)&&r.some((t=>t.getPosition().lat()===o&&t.getPosition().lng()===n))},h=(e,o)=>{const{latitude:n,longitude:i}=e;if(!t.value||0===n||0===i)return;const s=new a.LatLng(n,i),c=new a.Marker({position:s,icon:l[o],map:t.value});return r.push(c),c},m=async(t,o,r)=>{try{c();const i=r?r.map((t=>`${t.longitude},${t.latitude}`)).join("_"):"",s=await(0,n.N)(String(t.longitude),String(t.latitude),String(o.longitude),String(o.latitude),i);e=[],s.forEach((t=>{const o=t.geometry;t.properties;"LineString"===o.type&&o.coordinates.forEach((t=>{const o=new a.Point(t[0],t[1]),n=a.Projection.convertEPSG3857ToWGS84GEO(o),r=new a.LatLng(n._lat,n._lng);e.push(r)}))})),d(e)}catch(i){console.error("경로 검색 중 오류 발생:",i)}},w=async t=>{const r=[33.433944015499456,126.43602130714433],i=[33.45120886113757,126.48765563964844],s="126.39573248492509,33.47190207955216_126.44226001173622,33.47486469122896_126.42766879469521,33.48001928930712";try{const c=await(0,n.N)(String(r[1]),String(r[0]),String(i[1]),String(i[0]),s);o.length>0&&(o.forEach((t=>t.setMap(null))),o=[]),e=[],c.forEach((o=>{const n=o.geometry,r=o.properties;if("LineString"===n.type)n.coordinates.forEach((t=>{const o=new a.Point(t[0],t[1]),n=a.Projection.convertEPSG3857ToWGS84GEO(o),r=new a.LatLng(n._lat,n._lng);e.push(r)}));else if("GP"!==r.pointType&&r.pointType.includes("PP")){const e=new a.Point(n.coordinates[0],n.coordinates[1]),o=a.Projection.convertEPSG3857ToWGS84GEO(e);new a.Marker({position:new a.LatLng(o._lat,o._lng),icon:l["location"],map:t.value})}})),d(e)}catch(c){console.error("경로 검색 중 오류 발생:",c)}},y=(e,o)=>{if(t.value)if(isNaN(e)||isNaN(o))console.error("유효하지 않은 좌표:",e,o);else{const n=new a.LatLng(e,o);t.value.setCenter(n),t.value.setZoom(15)}},k=async()=>{try{const e=await p(),{latitude:o,longitude:n}=e.coords,r=new a.LatLng(o,n);new a.Marker({position:r,icon:l["now"],map:t.value}),y(o,n)}catch(e){console.error(e),alert("현재 위치를 가져오는 데 실패했습니다.");const t=33.50712081595116,o=126.49340629577637;y(t,o)}};return{initTmap:g,removeMarker:v,searchRoutes:m,addMarker:h,clearMarkers:u,checkDuplMarker:f,moveLocation:y,moveNowLocation:k,searchRoutesTest:w}}},7037:function(t,e,o){o.r(e),o.d(e,{default:function(){return g}});var n=o(6768),r=o(144),a=o(5035),i=o(9623);const s=t=>((0,n.Qi)("data-v-313b6b8b"),t=t(),(0,n.jt)(),t),c={class:"container"},l=s((()=>(0,n.Lk)("div",{id:"map_div"},null,-1)));var u=(0,n.pM)({__name:"WalkingTravel",setup(t){const e=(0,r.KR)(null),{initTmap:o,addMarker:s,moveNowLocation:u}=(0,i.k)(e);return(0,n.sV)((async()=>{await o(e),await u()})),(t,e)=>((0,n.uX)(),(0,n.CE)("div",c,[(0,n.bF)((0,r.R1)(a.Vs),null,{center:(0,n.k6)((()=>[(0,n.eW)(" 나의 걷기 기록 ")])),right:(0,n.k6)((()=>[])),_:1}),l]))}}),d=o(1241);const p=(0,d.A)(u,[["__scopeId","data-v-313b6b8b"]]);var g=p}}]);
//# sourceMappingURL=7052.187a4d3b.js.map