"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[8578],{525:function(t,e,a){a.d(e,{Ak:function(){return u},EZ:function(){return i},Md:function(){return d},Ro:function(){return s},ZM:function(){return c},bt:function(){return h},ij:function(){return v},qm:function(){return l}});var n=a(4373);const r={"Content-Type":"application/json"},o=t=>{const e=n.A.isAxiosError(t)&&t.response?t.response.data.errorCode:null;throw{originalError:t,errorCode:e}},l=async(t,e)=>{try{const a="http://localhost:8080/api/v1/auth/sms/send",o={name:t,phoneNumber:e},l=await n.A.post(a,o,{headers:r});return l.data}catch(a){o(a)}},i=async(t,e,a)=>{try{const o="http://localhost:8080/api/v1/auth/sms/check",l={name:t,phoneNumber:e,verificationCode:a},i=await n.A.post(o,l,{headers:r});return i.data}catch(l){o(l)}},u=async(t,e)=>{try{const a="http://localhost:8080/api/v1/auth/sms/send/later",o={name:t,phoneNumber:e},l=await n.A.post(a,o,{headers:r});return l.data}catch(a){o(a)}},c=async t=>{try{const e="http://localhost:8080/api/v1/auth/authentication/send",a=await n.A.post(e,{email:t},{headers:{"Content-Type":"application/json"}});return a.data}catch(e){const t=n.A.isAxiosError(e)&&e.response?e.response.data.errorCode:null;throw{originalError:e,errorCode:t}}},s=async(t,e)=>{try{const a="http://localhost:8080/api/v1/auth/authentication/check",o={email:t,authCode:e},l=await n.A.post(a,o,{headers:r});return l.data}catch(a){o(a)}},d=async(t,e)=>{try{const a="http://localhost:8080/api/v1/auth/find/id",r={name:t,phoneNumber:e},o=await n.A.post(a,r);return o.data}catch(a){o(a)}},h=async(t,e)=>{try{const a="http://localhost:8080/api/v1/auth/authentication/check/later",r={email:t,authCode:e},o=await n.A.post(a,r);return o.data}catch(a){o(a)}},v=async t=>{try{const e="http://localhost:8080/api/v1/auth/check/id",a={email:t},r=await n.A.post(e,a);return r.data}catch(e){o(e)}}},8578:function(t,e,a){a.r(e),a.d(e,{default:function(){return A}});a(4114);var n=a(6768),r=a(144),o=a(1387),l=a(525),i=a(5438),u=a(1810),c=a(5234),s=a(8606);const d=t=>((0,n.Qi)("data-v-7b0c3c20"),t=t(),(0,n.jt)(),t),h={class:"verification-container"},v={class:"input-group"},p=d((()=>(0,n.Lk)("br",null,null,-1))),f=d((()=>(0,n.Lk)("br",null,null,-1))),m=d((()=>(0,n.Lk)("br",null,null,-1)));var y=(0,n.pM)({__name:"FindIDByPhone",setup(t){const e=(0,o.rd)(),a=(0,u.I4)(),{inputState:d,inputMessage:y}=(0,c.bP)(a),b=(0,r.Kh)({verificationSent:!1,verificationExpired:!1,verificationStart:null}),k=(0,r.KR)(""),A=(0,r.KR)("default"),C=(0,r.KR)(""),R=(0,r.KR)("default"),S=(0,r.KR)(""),w=(0,r.KR)("default"),g=(0,r.KR)(""),V=async()=>{if(0===k.value.length)return void(A.value="error");A.value="default";const t=C.value.replace(/-/g,"");if((0,i.Q7)(t)){R.value="default";try{await(0,l.Ak)(k.value,t),b.verificationSent=!0,b.verificationStart=Date.now(),d.value="default",y.value=""}catch(e){const t=e;"INVALID_VALUE_04"===t.errorCode?(d.value="error",y.value="이미 계정이 존재합니다."):"INVALID_VALUE_01"===t.errorCode&&(d.value="error",y.value="휴대폰 번호를 정확히 입력해주세요.")}}else R.value="error"},E=async()=>{if(b.verificationSent)try{const t=C.value.replace(/-/g,"");await(0,l.EZ)(k.value,t,S.value),e.push({name:"find-id-result",query:{name:k.value,phoneNumber:t}})}catch(t){const e=t;"AUTH_03"===e.errorCode&&(w.value="error",g.value="인증번호가 틀렸습니다.")}},x=()=>{b.verificationExpired=!0,b.verificationSent=!1,b.verificationStart=null};return(t,e)=>((0,n.uX)(),(0,n.CE)("div",h,[(0,n.Lk)("span",v,[(0,n.bF)((0,r.R1)(s.pd),{placeholder:"이름을 입력해주세요",label:"이름",modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=t=>k.value=t),state:A.value},null,8,["modelValue","state"]),(0,n.bF)((0,r.R1)(s.pd),{placeholder:"000-0000-0000",onInput:(0,r.R1)(i.Y8),maxlength:"13",label:"휴대폰 번호",modelValue:C.value,"onUpdate:modelValue":e[1]||(e[1]=t=>C.value=t),state:(0,r.R1)(d),message:"가입 시 등록한 휴대폰 번호를 입력해주세요"},null,8,["onInput","modelValue","state"]),b.verificationSent?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)((0,r.R1)(s.$n),{key:0,text:"인증번호 받기",onClick:V,style:{backgroundColor:"var(--color-button-secondary)",color:"var(--color-button-on-secondary)",height:"44px",fontSize:"1.4rem"}})),b.verificationSent?((0,n.uX)(),(0,n.Wv)((0,r.R1)(s.pd),{key:1,placeholder:"인증번호 입력",label:"인증번호",modelValue:S.value,"onUpdate:modelValue":e[2]||(e[2]=t=>S.value=t),state:w.value,message:g.value},null,8,["modelValue","state","message"])):(0,n.Q3)("",!0),b.verificationSent?((0,n.uX)(),(0,n.Wv)((0,r.R1)(s.PM),{key:2,verificationStart:b.verificationStart,handleTimeout:x,onResendSms:V},null,8,["verificationStart"])):(0,n.Q3)("",!0)]),p,f,m,b.verificationSent?((0,n.uX)(),(0,n.Wv)((0,r.R1)(s.$n),{key:0,class:"next-button",onClick:E,text:"다음"})):(0,n.Q3)("",!0)]))}}),b=a(1241);const k=(0,b.A)(y,[["__scopeId","data-v-7b0c3c20"]]);var A=k}}]);
//# sourceMappingURL=8578.fa81f3d7.js.map