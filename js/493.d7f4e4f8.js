"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[493],{4479:function(o,e,t){t.d(e,{N:function(){return r},a:function(){return a}});var n=t(4373);const r=async(o,e,t,r,a,s="출발지",c="도착지")=>{const i={appKey:"jJCpIOodyO74vfAm2r4qt8D6vRQllj3KB6Ixr0j6"};try{const l={startX:o,startY:e,endX:t,endY:r,reqCoordType:"WGS84GEO",resCoordType:"EPSG3857",startName:s,endName:c};a&&""!==a.trim()&&(l.passList=a);const u=await n.A.post("https://apis.openapi.sk.com/tmap/routes/pedestrian?version=1&format=json",l,{headers:i});return u.data.features}catch(l){throw console.error("경로를 가져오는 중 오류 발생:",l),l}},a=async(o,e)=>{try{const t=await n.A.get(`https://apis.openapi.sk.com/tmap/geo/reversegeocoding?version=1&lat=${o}&lon=${e}&format=json&appKey=jJCpIOodyO74vfAm2r4qt8D6vRQllj3KB6Ixr0j6`),r=t.data,a=r?.addressInfo?.fullAddress||"";return a}catch(t){throw console.error("Reverse Geocoding 에러:",t),t}}},9623:function(o,e,t){t.d(e,{k:function(){return d}});t(4114);var n=t(4479),r=t.p+"img/course.41ad5011.svg",a=t.p+"img/end.0fea751a.svg",s=t.p+"img/location.2c3bbc9a.svg",c=t.p+"img/now.84d14ee6.svg",i=t.p+"img/start.7b041b36.svg";const l={course:r,location:s,now:c,start:i,end:a};var u=t(3617);const d=o=>{let e=[],t=[],r=[];const a=window.Tmapv2,s=e=>{if(e.length>0){const t=new a.LatLngBounds;e.forEach((o=>{t.extend(o)})),o.value.fitBounds(t)}else console.error("Zoom 조정할 경로 데이터가 부족합니다.")},c=(e,t,n)=>new a.Polyline({path:e,strokeColor:t,strokeWeight:n,fillOpacity:1,map:o.value,direction:!0,directionColor:"white"}),i=()=>{t.length>0&&(t.forEach((o=>{o&&"function"===typeof o.setVisible&&o.setVisible(!1)})),t=[])},d=()=>{r.forEach((o=>o.setMap(null))),r=[]},p=o=>{const e=o.length,n=10,r=["#75FFA5","#22F779","#13D168","#07AB56","#008545"];r.forEach(((r,a)=>{const s=Math.floor(e*(.2*a)),i=Math.floor(e*(.2*(a+1))),l=o.slice(s,i+1),u=c(l,r,n);t.push(u)})),s(o)},g=o=>new Promise(((e,t)=>{o.value?t("지도 객체 초기화 실패: 이미 초기화된 상태입니다."):(o.value=new a.Map("map_div",{width:"100%",height:"100%",zoom:15,scaleBar:!1,zoomControl:!1}),e())})),v=e=>{const{latitude:t,longitude:n}=e;if(!o.value||0===t||0===n)return;const a=r.findIndex((o=>o.getPosition().lat()===t&&o.getPosition().lng()===n));-1!==a?(r[a].setMap(null),r.splice(a,1)):console.log("해당 위치에 마커가 없습니다.")},h=e=>{const{latitude:t,longitude:n}=e;return!!(t&&n&&o.value)&&r.some((o=>o.getPosition().lat()===t&&o.getPosition().lng()===n))},f=(e,t)=>{const{latitude:n,longitude:s}=e;if(!o.value||0===n||0===s)return;const c=new a.LatLng(n,s),i=new a.Marker({position:c,icon:l[t],map:o.value});return r.push(i),i},m=async(o,t,r)=>{try{i();const s=r?r.map((o=>`${o.longitude},${o.latitude}`)).join("_"):"",c=await(0,n.N)(String(o.longitude),String(o.latitude),String(t.longitude),String(t.latitude),s);e=[],c.forEach((o=>{const t=o.geometry;o.properties;"LineString"===t.type&&t.coordinates.forEach((o=>{const t=new a.Point(o[0],o[1]),n=a.Projection.convertEPSG3857ToWGS84GEO(t),r=new a.LatLng(n._lat,n._lng);e.push(r)}))})),p(e)}catch(s){console.error("경로 검색 중 오류 발생:",s)}},w=async o=>{const r=[33.433944015499456,126.43602130714433],s=[33.45120886113757,126.48765563964844],c="126.39573248492509,33.47190207955216_126.44226001173622,33.47486469122896_126.42766879469521,33.48001928930712";try{const i=await(0,n.N)(String(r[1]),String(r[0]),String(s[1]),String(s[0]),c);t.length>0&&(t.forEach((o=>o.setMap(null))),t=[]),e=[],i.forEach((t=>{const n=t.geometry,r=t.properties;if("LineString"===n.type)n.coordinates.forEach((o=>{const t=new a.Point(o[0],o[1]),n=a.Projection.convertEPSG3857ToWGS84GEO(t),r=new a.LatLng(n._lat,n._lng);e.push(r)}));else if("GP"!==r.pointType&&r.pointType.includes("PP")){const e=new a.Point(n.coordinates[0],n.coordinates[1]),t=a.Projection.convertEPSG3857ToWGS84GEO(e);new a.Marker({position:new a.LatLng(t._lat,t._lng),icon:l["location"],map:o.value})}})),p(e)}catch(i){console.error("경로 검색 중 오류 발생:",i)}},y=(e,t)=>{if(o.value)if(isNaN(e)||isNaN(t))console.error("유효하지 않은 좌표:",e,t);else{const n=new a.LatLng(e,t);o.value.setCenter(n),o.value.setZoom(15)}},k=async()=>{if(!o.value)return;let e,t;try{[e,t]=await(0,u.v)();const n=new a.LatLng(e,t);new a.Marker({position:n,icon:l["now"],map:o.value})}catch(n){[e,t]=[33.50712081595116,126.49340629577637],console.error("현재 위치를 찾을 수 없습니다:",n)}y(e,t)};return{initTmap:g,removeMarker:v,searchRoutes:m,addMarker:f,clearMarkers:d,checkDuplMarker:h,moveLocation:y,searchRoutesTest:w,moveNowLocation:k}}},3617:function(o,e,t){t.d(e,{v:function(){return r}});var n=t(4479);const r=()=>new Promise(((o,e)=>{const t=async t=>{const a=t.coords.latitude,s=t.coords.longitude;console.log("현재 위치:",a,s);try{const e=await(0,n.a)(a,s);console.log("현재 주소:",e),o([a,s,e])}catch(r){console.error("Reverse Geocoding 에러:",r),e(r)}},r=o=>{console.error(`ERROR(${o.code}): ${o.message}`),e(o)};navigator.geolocation.getCurrentPosition(t,r,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}))},3315:function(o,e,t){t.r(e),t.d(e,{default:function(){return y}});t(4114);var n=t(6768),r=t(144),a=t(6502),s=t(9623),c=t(2893);const i=o=>((0,n.Qi)("data-v-e5cf9dc4"),o=o(),(0,n.jt)(),o),l={class:"container"},u={class:"search-container"},d={class:"tags-container"},p={class:"search-map"},g=i((()=>(0,n.Lk)("div",{id:"map_div"},null,-1))),v={class:"map-button"},h={class:"course-button"};var f=(0,n.pM)({__name:"CourseSearch",setup(o){const e=(0,r.KR)(null),{initTmap:t,searchRoutesTest:i,moveNowLocation:f}=(0,s.k)(e);(0,n.sV)((async()=>{await t(e),await f()}));const m=o=>{console.log("Search bar enter key pressed or icon clicked",o)},w=()=>{f()},y=()=>{i(e)},k=()=>{c.A.push({name:"create-course"})},L={backgroundColor:"var(--color-button-secondary)",color:"var(--color-button-on-secondary)",width:"48px",height:"48px",fontSize:"1.4rem"},S={backgroundColor:"var(--color-button-secondary)",color:"var(--color-button-on-secondary)",height:"48px",width:"156px",fontSize:"1.4rem"},b={width:"158px",height:"44px",fontSize:"1.4rem"};return(o,e)=>((0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("header",null,[(0,n.Lk)("div",u,[(0,n.bF)((0,r.R1)(a.vj),{onSearch:m})]),(0,n.Lk)("div",d,[(0,n.bF)((0,r.R1)(a.YD))])]),(0,n.Lk)("div",p,[g,(0,n.Lk)("div",v,[(0,n.bF)((0,r.R1)(a.$n),{icon:(0,r.R1)(a.dS),style:L,onClick:w},null,8,["icon"]),(0,n.Lk)("div",h,[(0,n.bF)((0,r.R1)(a.$n),{text:"주변코스 검색",icon:(0,r.R1)(a.WI),style:S,onClick:y},null,8,["icon"]),(0,n.bF)((0,r.R1)(a.$n),{text:"코스 생성하기",icon:(0,r.R1)(a.uQ),style:b,onClick:k},null,8,["icon"])])])])]))}}),m=t(1241);const w=(0,m.A)(f,[["__scopeId","data-v-e5cf9dc4"]]);var y=w}}]);
//# sourceMappingURL=493.d7f4e4f8.js.map