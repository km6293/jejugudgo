{"version":3,"file":"js/3577.6aac182a.js","mappings":"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","sources":["webpack://frontend/./src/apis/courseFeature/tmap.ts","webpack://frontend/./src/stores/recommendedCourse/createCourse.ts","webpack://frontend/./src/views/recommendedCourse/components/SearchResult.vue?3fb4","webpack://frontend/./src/views/recommendedCourse/components/SearchResult.vue","webpack://frontend/./src/views/recommendedCourse/components/SearchResult.vue?5b09"],"sourcesContent":["import axios from 'axios';\n\nexport const requestRoute = async (\n  startX: string,\n  startY: string,\n  endX: string,\n  endY: string,\n  passList?: string,\n  startName = '출발지',\n  endName = '도착지'\n) => {\n  const headers = {\n    appKey: process.env.VUE_APP_MAP_API,\n  };\n\n  try {\n    const data: Record<string, any> = {\n      startX,\n      startY,\n      endX,\n      endY,\n      reqCoordType: 'WGS84GEO',\n      resCoordType: 'EPSG3857',\n      startName,\n      endName,\n    };\n\n    if (passList && passList.trim() !== '') {\n      data.passList = passList;\n    }\n\n    const response = await axios.post(\n      'https://apis.openapi.sk.com/tmap/routes/pedestrian?version=1&format=json',\n      data,\n      { headers }\n    );\n\n    return response.data.features;\n  } catch (error) {\n    console.error('경로를 가져오는 중 오류 발생:', error);\n    throw error;\n  }\n};\n\nexport const getReverseGeocoding = async (\n  latitude: number,\n  longitude: number\n): Promise<string> => {\n  try {\n    const response = await axios.get(\n      `https://apis.openapi.sk.com/tmap/geo/reversegeocoding?version=1&lat=${latitude}&lon=${longitude}&format=json&appKey=${process.env.VUE_APP_MAP_API}`\n    );\n    const data = response.data;\n    const address = data?.addressInfo?.fullAddress || '';\n\n    return address;\n  } catch (error) {\n    console.error('Reverse Geocoding 에러:', error);\n    throw error;\n  }\n};\n\nexport const searchPlaces = async (keyword: string) => {\n  const headers = {\n    appKey: process.env.VUE_APP_MAP_API, // TMap API 키\n  };\n\n  try {\n    const response = await axios.get(\n      `https://apis.openapi.sk.com/tmap/pois?version=1&format=json&searchKeyword=${encodeURIComponent(\n        keyword\n      )}&resCoordType=WGS84GEO&reqCoordType=WGS84GEO&count=10`,\n      { headers }\n    );\n\n    return response.data.searchPoiInfo.pois.poi.map((poi: any) => ({\n      name: poi.name,\n      latitude: poi.frontLat,\n      longitude: poi.frontLon,\n      address: poi.newAddressList.newAddress[0]?.fullAddress || poi.address,\n    }));\n  } catch (error) {\n    console.error('장소 검색 중 오류 발생:', error);\n    throw error;\n  }\n};\n","import { defineStore } from 'pinia';\nimport { computed, reactive, toRefs } from 'vue';\nimport { ICourseDataType, ISpotType } from './type';\n\nexport const useCreateCourseStore = defineStore('createCourse', () => {\n  const initialState: ICourseDataType = {\n    input: '',\n    page: 1,\n    showSearch: false,\n    startPoint: { name: '', longitude: 0, latitude: 0, type: 'USER' },\n    wayPoint: [],\n    endPoint: { name: '', longitude: 0, latitude: 0, type: 'USER' },\n    visibilityStatus: true,\n    courseName: '',\n    keyword: [],\n    suggestionCourse: '',\n    selectedObject: { type: 'startPoint' },\n  };\n\n  const state = reactive({ ...initialState });\n\n  const addWayPoint = () => {\n    state.wayPoint.push({ name: '', longitude: 0, latitude: 0, type: 'USER' });\n  };\n\n  const removeWayPoint = (index: number) => {\n    state.wayPoint.splice(index, 1);\n  };\n\n  const updateData = <K extends keyof ICourseDataType>(\n    item: K,\n    value: K extends 'wayPoint' ? ISpotType : ICourseDataType[K],\n    index?: number\n  ) => {\n    if (item === 'wayPoint' && typeof index !== 'undefined') {\n      console.log(`Updating wayPoint at index ${index}:`, value);\n      state.wayPoint[index] = value as ISpotType;\n    } else {\n      console.log(`Updating ${item}:`, value);\n      state[item] = value as ICourseDataType[K];\n    }\n  };\n\n  const addKeyword = (id: string) => {\n    if (!state.keyword.includes(id)) {\n      state.keyword.push(id);\n    }\n  };\n\n  const removeKeyword = (id: string) => {\n    state.keyword = state.keyword.filter((k) => k !== id);\n  };\n\n  const $reset = () => {\n    Object.assign(state, initialState);\n  };\n\n  const startPointValid = computed(() => {\n    return (\n      state.startPoint.name !== '' &&\n      state.startPoint.longitude !== 0 &&\n      state.startPoint.latitude !== 0\n    );\n  });\n\n  const endPointValid = computed(() => {\n    return (\n      state.endPoint.name !== '' &&\n      state.endPoint.longitude !== 0 &&\n      state.endPoint.latitude !== 0\n    );\n  });\n\n  const wayPointsValid = computed(() =>\n    state.wayPoint.every(\n      (point) =>\n        point.name !== '' && point.longitude !== 0 && point.latitude !== 0\n    )\n  );\n\n  return {\n    ...toRefs(state),\n    $reset,\n    updateData,\n    addWayPoint,\n    removeWayPoint,\n    addKeyword,\n    removeKeyword,\n    startPointValid,\n    endPointValid,\n    wayPointsValid,\n  };\n});\n","import { defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = (n: any) => (_pushScopeId(\"data-v-77010bba\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"container\" }\nconst _hoisted_2 = { class: \"slider\" }\nconst _hoisted_3 = [\"onClick\"]\nconst _hoisted_4 = { class: \"content-title body1-medium\" }\n\nimport { CardImage } from '@/components';\r\nimport { storeToRefs } from 'pinia';\r\nimport { useCreateCourseStore } from '@/stores/recommendedCourse/createCourse';\r\nimport { searchPlaces } from '@/apis/courseFeature/tmap';\r\nimport { onMounted, ref } from 'vue';\r\nimport { ISpotType } from '@/stores/recommendedCourse/type';\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'SearchResult',\n  setup(__props) {\n\r\nconst createCourseStore = useCreateCourseStore();\r\nconst { selectedObject, input } = storeToRefs(createCourseStore);\r\n\r\nconst places = ref<\r\n  Array<{ name: string; latitude: number; longitude: number; address: string }>\r\n>([]);\r\n\r\nonMounted(async () => {\r\n  try {\r\n    if (input.value !== '') {\r\n      const result = await searchPlaces(input.value);\r\n      places.value = result;\r\n    }\r\n  } catch (error) {\r\n    console.error('장소를 가져오는 중 오류 발생:', error);\r\n  }\r\n});\r\n\r\nconst onResultClick = (place: {\r\n  name: string;\r\n  latitude: number;\r\n  longitude: number;\r\n  address: string;\r\n}) => {\r\n  const { type, index } = selectedObject.value;\r\n  const { name, latitude, longitude, address } = place;\r\n  const data: ISpotType = {\r\n    name,\r\n    longitude,\r\n    latitude,\r\n    type: 'USER',\r\n    category: 'USER',\r\n    address: address,\r\n  };\r\n\r\n  if (type === 'wayPoint' && index !== undefined) {\r\n    createCourseStore.updateData(type, data, index);\r\n  } else if (type === 'startPoint') {\r\n    createCourseStore.updateData(type, data);\r\n  } else if (type === 'endPoint') {\r\n    createCourseStore.updateData(type, data);\r\n  }\r\n\r\n  createCourseStore.updateData('showSearch', false);\r\n};\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(places.value, (place, index) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: index,\n          class: \"item\",\n          onClick: ($event: any) => (onResultClick(place))\n        }, [\n          _createVNode(_unref(CardImage), {\n            test: '104x104',\n            icon: false\n          }),\n          _createElementVNode(\"div\", _hoisted_4, _toDisplayString(place.name), 1)\n        ], 8, _hoisted_3))\n      }), 128))\n    ])\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"container\">\r\n    <div class=\"slider\">\r\n      <div\r\n        v-for=\"(place, index) in places\"\r\n        :key=\"index\"\r\n        class=\"item\"\r\n        @click=\"onResultClick(place)\"\r\n      >\r\n        <CardImage\r\n          :test=\"'104x104'\"\r\n          :icon=\"false\"\r\n        />\r\n        <div class=\"content-title body1-medium\">\r\n          {{ place.name }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { CardImage } from '@/components';\r\nimport { storeToRefs } from 'pinia';\r\nimport { useCreateCourseStore } from '@/stores/recommendedCourse/createCourse';\r\nimport { searchPlaces } from '@/apis/courseFeature/tmap';\r\nimport { onMounted, ref } from 'vue';\r\nimport { ISpotType } from '@/stores/recommendedCourse/type';\r\n\r\nconst createCourseStore = useCreateCourseStore();\r\nconst { selectedObject, input } = storeToRefs(createCourseStore);\r\n\r\nconst places = ref<\r\n  Array<{ name: string; latitude: number; longitude: number; address: string }>\r\n>([]);\r\n\r\nonMounted(async () => {\r\n  try {\r\n    if (input.value !== '') {\r\n      const result = await searchPlaces(input.value);\r\n      places.value = result;\r\n    }\r\n  } catch (error) {\r\n    console.error('장소를 가져오는 중 오류 발생:', error);\r\n  }\r\n});\r\n\r\nconst onResultClick = (place: {\r\n  name: string;\r\n  latitude: number;\r\n  longitude: number;\r\n  address: string;\r\n}) => {\r\n  const { type, index } = selectedObject.value;\r\n  const { name, latitude, longitude, address } = place;\r\n  const data: ISpotType = {\r\n    name,\r\n    longitude,\r\n    latitude,\r\n    type: 'USER',\r\n    category: 'USER',\r\n    address: address,\r\n  };\r\n\r\n  if (type === 'wayPoint' && index !== undefined) {\r\n    createCourseStore.updateData(type, data, index);\r\n  } else if (type === 'startPoint') {\r\n    createCourseStore.updateData(type, data);\r\n  } else if (type === 'endPoint') {\r\n    createCourseStore.updateData(type, data);\r\n  }\r\n\r\n  createCourseStore.updateData('showSearch', false);\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  padding: 0 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: var(--margin-m);\r\n}\r\n.slider {\r\n  gap: var(--margin-m);\r\n  display: grid;\r\n}\r\n\r\n.item {\r\n  height: 104px;\r\n  gap: 16px;\r\n  display: flex;\r\n}\r\n\r\n.content-title {\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  color: var(--color-text-secondary);\r\n}\r\n</style>\r\n","import script from \"./SearchResult.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SearchResult.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SearchResult.vue?vue&type=style&index=0&id=77010bba&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-77010bba\"]])\n\nexport default __exports__"],"names":["requestRoute","async","startX","startY","endX","endY","passList","startName","endName","headers","appKey","process","data","reqCoordType","resCoordType","trim","response","axios","post","features","error","console","getReverseGeocoding","latitude","longitude","get","address","addressInfo","fullAddress","searchPlaces","encodeURIComponent","keyword","searchPoiInfo","pois","poi","map","name","frontLat","frontLon","newAddressList","newAddress","useCreateCourseStore","defineStore","initialState","input","page","showSearch","startPoint","type","wayPoint","endPoint","visibilityStatus","courseName","suggestionCourse","selectedObject","state","reactive","addWayPoint","push","removeWayPoint","index","splice","updateData","item","value","log","addKeyword","id","includes","removeKeyword","filter","k","$reset","Object","assign","startPointValid","computed","endPointValid","wayPointsValid","every","point","toRefs","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_defineComponent","__name","setup","__props","createCourseStore","storeToRefs","places","ref","onMounted","result","onResultClick","place","category","undefined","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","_Fragment","_renderList","key","onClick","$event","_createVNode","_unref","CardImage","test","icon","_toDisplayString","__exports__"],"sourceRoot":""}