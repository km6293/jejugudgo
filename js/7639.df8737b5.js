"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[7639,6754,9635],{132:function(t,e,o){o.d(e,{C_:function(){return l},_2:function(){return u},aL:function(){return d.aL},N7:function(){return d.N7}});var r=o(5438),n=o(4373),a=o(2628);const s=n.A.create({baseURL:"https://jejugudgo.xyz:8080",timeout:1e3});s.interceptors.request.use((t=>{const e=(0,a.Ri)("Authorization");return e&&(t.headers["Authorization"]=`Bearer ${e}`),t}),(t=>Promise.reject(t))),s.interceptors.response.use((t=>t),(async t=>{const e=t.config;if(t.response&&401===t.response.status&&"TOKEN_01"===t.response.data?.errorCode&&!e._retry){e._retry=!0;try{const t=await n.A.post("https://jejugudgo.xyz:8080/auth/token/refresh",null,{withCredentials:!0}),o=t.headers["authorization"];return(0,a.TV)("Authorization",o),s.defaults.headers.common["Authorization"]=`Bearer ${o}`,e.headers["Authorization"]=`Bearer ${o}`,s(e)}catch(o){return Promise.reject(o)}}return Promise.reject(t)}));var i=s;const c=t=>{const e=n.A.isAxiosError(t)&&t.response?t.response.data.errorCode:null;throw{originalError:t,errorCode:e}},u=async(t,e,o)=>{try{(0,r.Ri)("Authorization");const t={data:[{id:"1013246",updatedAt:"20240510103332",latitude:126.5260587646,longitude:33.5115624162,title:"동문재래시장",imageUrl:"http://tong.visitkorea.or.kr/cms/resource/86/3039486_image2_1.jpeg",content:"동문재래시장은 오랜 역사를  지닌 전통 재래시장으로 제주도를 대표하는 시장 중 하나이다. 동문재래수산시장과  더불어 제주도에서 가장 중요하면서 대규모의 상설 재래시장을 구성하고 있다. 1945년  8월 광복 직후 형성된 것이 시초인데, 이 시장은 당시 제주도의 유일한 상설시장으로  제주도 전체 상업 활동의 근거지가 되었다. 1954년 3월에 발생한 대형 화재로 시장  전체가 잿더미로 변하자 같은 해 11월 현재의 장소로 이전했다. 주요 취급 품목은  야채, 과일, 수산물, 약초, 곡물, 의류 등이 있다. 제주도의 대표 재래시장인 만큼 신선한 해산물이 인기다. 갈치회를 비롯한 다양한 모듬회를 저렴한 값에 구매할 수 있으며, 전복내장밥(게우밥) 삼합이나 통전복이 들어간 떡갈비 등 퓨전음식이 주목받고 있다."},{id:"1013289",updatedAt:"20230423054547",latitude:126.5405800026,longitude:33.4993528886,title:"제주 특산품전시판매장",imageUrl:"http://tong.visitkorea.or.kr/cms/resource/24/1031524_image2_1.jpg",content:"제주특별자치도가 도내중소기업들의 판로난을 해결하고 제주특산품의 통합마케팅을 위하여 제주도중소기업종합지원센터 1층에 마련한 매장입니다.제주원료를 갖고 제주에서 생산되는 특산품만을 한곳에 전시․판매하는 곳인 이곳에서는 현재 138개업체의 농,수,축산품, 가공식품, 공예,향장품(香粧品) 등 2,200여개 산품들이 입점되어 있으며 전국에서 단일지역특산품매장으로는 가장 큰규모이다. 생산자와의 직거래를 통한 저렴한 가격 , 구매고객을 위한 최상의 서비스, 소비자들이 신뢰할수 품질관리시스템을를 추구하고 온-오프라인 판매장을 연계하여 제주의 쇼핑명소로 거듭 나고 있다."},{id:"1014672",updatedAt:"20230612154300",latitude:126.52466996,longitude:33.5131677726,title:"제주 중앙지하상가",imageUrl:"http://tong.visitkorea.or.kr/cms/resource/58/1017258_image2_1.jpg",content:"제주시내 번화가인 중앙로에는 낡은 시설을 개.보수하여 새롭게 단장한 현대적인 지하아케이드가 조성되어 있다. 중앙로를 기점으로 서문로에서 동문로까지 잇는 지하 아케이드는 현재 300여 개의 점포가 들어서 있다. 주로 의류점이 많고 그 외 신발, 액세서리, 안경, 시계, 보석, 가방, 모자 등을 판매하는 상점들이 들어서 있으며 식당, 패스트푸드점 등과 중간, 중간에는 휴게 시설도 마련되어 고객의 쉼터도 자리잡고있다. 제주도 유일 지하상가이며 쾌적하고 가장 활발한 쇼핑 명소이다."},{id:"1862763",updatedAt:"20230214164641",latitude:126.5213730415,longitude:33.512426135,title:"더 아일랜더",imageUrl:"http://tong.visitkorea.or.kr/cms/resource/01/2558001_image2_1.JPG",content:"2013년 제주의 원도심에서 오픈하여 제주도 기념품을 판매하고 있는 더 아일랜더는 최근 2호점인 라이프스타일 스토어와 함께 하나의 공간에서 새롭게 영업을 하고 있다. 기존의 제주도 기념품 외에 다양한 디자인 소품을 만나 보실 수 있으며, 작은 카페 공간도 함께 운영 중 이다."}]};return t.data}catch(n){c(n)}},l=async(t,e,o,r,n,a,s)=>{try{const c=`https://jejugudgo.xyz:8080/api/v1/users/${r}/planners`,u=a.length>0?[n,...a,s]:[n,s],l={title:t,isPrivate:e,tags:o,courseCreateRequestDto:{type:"USER",title:t,userId:r},spotCreateRequestDto:u},d=await i.post(c,l);return d.data}catch(u){c(u)}};var d=o(4479)},4479:function(t,e,o){o.d(e,{N7:function(){return n},aL:function(){return a},hc:function(){return s}});var r=o(4373);const n=async(t,e,o,n,a,s="출발지",i="도착지")=>{const c={appKey:"jJCpIOodyO74vfAm2r4qt8D6vRQllj3KB6Ixr0j6"};try{const u={startX:t,startY:e,endX:o,endY:n,reqCoordType:"WGS84GEO",resCoordType:"EPSG3857",startName:s,endName:i};a&&""!==a.trim()&&(u.passList=a);const l=await r.A.post("https://apis.openapi.sk.com/tmap/routes/pedestrian?version=1&format=json",u,{headers:c});return l.data.features}catch(u){throw console.error("경로를 가져오는 중 오류 발생:",u),u}},a=async(t,e)=>{try{const o=await r.A.get(`https://apis.openapi.sk.com/tmap/geo/reversegeocoding?version=1&lat=${t}&lon=${e}&format=json&appKey=jJCpIOodyO74vfAm2r4qt8D6vRQllj3KB6Ixr0j6`),n=o.data,a=n?.addressInfo?.fullAddress||"";return a}catch(o){throw console.error("Reverse Geocoding 에러:",o),o}},s=async t=>{const e={appKey:"jJCpIOodyO74vfAm2r4qt8D6vRQllj3KB6Ixr0j6"};try{const o=await r.A.get(`https://apis.openapi.sk.com/tmap/pois?version=1&format=json&searchKeyword=${encodeURIComponent(t)}&resCoordType=WGS84GEO&reqCoordType=WGS84GEO&count=10`,{headers:e});return o.data.searchPoiInfo.pois.poi.map((t=>({name:t.name,latitude:t.frontLat,longitude:t.frontLon,address:t.newAddressList.newAddress[0]?.fullAddress||t.address})))}catch(o){throw console.error("장소 검색 중 오류 발생:",o),o}}},9623:function(t,e,o){o.d(e,{k:function(){return l}});o(4114);var r=o(132),n=o.p+"img/course.41ad5011.svg",a=o.p+"img/end.0fea751a.svg",s=o.p+"img/location.2c3bbc9a.svg",i=o.p+"img/now.84d14ee6.svg",c=o.p+"img/start.7b041b36.svg";const u={course:n,location:s,now:i,start:c,end:a},l=t=>{let e=[],o=[],n=[];const a=window.Tmapv2,s=e=>{if(e.length>0){const o=new a.LatLngBounds;e.forEach((t=>{o.extend(t)})),t.value.fitBounds(o)}else console.error("Zoom 조정할 경로 데이터가 부족합니다.")},i=(e,o,r)=>new a.Polyline({path:e,strokeColor:o,strokeWeight:r,fillOpacity:1,map:t.value,direction:!0,directionColor:"white"}),c=()=>{o.length>0&&(o.forEach((t=>{t&&"function"===typeof t.setVisible&&t.setVisible(!1)})),o=[])},l=()=>{n.forEach((t=>t.setMap(null))),n=[]},d=t=>{const e=t.length,r=10,n=["#75FFA5","#22F779","#13D168","#07AB56","#008545"];n.forEach(((n,a)=>{const s=Math.floor(e*(.2*a)),c=Math.floor(e*(.2*(a+1))),u=t.slice(s,c+1),l=i(u,n,r);o.push(l)})),s(t)},p=()=>new Promise(((t,e)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{t(e)}),(t=>{t.code===t.PERMISSION_DENIED?(alert("위치 권한이 거부되었습니다. 앱 설정에서 권한을 허용해 주세요."),e("위치 권한이 거부되었습니다.")):e("위치를 가져오는 데 실패했습니다.")})):e("이 브라우저는 위치 서비스를 지원하지 않습니다.")})),g=t=>new Promise(((e,o)=>{t.value?o("지도 객체 초기화 실패: 이미 초기화된 상태입니다."):(t.value=new a.Map("map_div",{width:"100%",height:"100%",zoom:15,scaleBar:!1,zoomControl:!1,httpsMode:!0}),e())})),h=e=>{const{latitude:o,longitude:r}=e;if(!t.value||0===o||0===r)return;const a=n.findIndex((t=>t.getPosition().lat()===o&&t.getPosition().lng()===r));-1!==a?(n[a].setMap(null),n.splice(a,1)):console.log("해당 위치에 마커가 없습니다.")},v=e=>{const{latitude:o,longitude:r}=e;return!!(o&&r&&t.value)&&n.some((t=>t.getPosition().lat()===o&&t.getPosition().lng()===r))},m=(e,o)=>{const{latitude:r,longitude:s}=e;if(!t.value||0===r||0===s)return;const i=new a.LatLng(r,s),c=new a.Marker({position:i,icon:u[o],map:t.value});return n.push(c),c},f=async(t,o,n)=>{try{c();const s=n?n.map((t=>`${t.longitude},${t.latitude}`)).join("_"):"",i=await(0,r.N7)(String(t.longitude),String(t.latitude),String(o.longitude),String(o.latitude),s);e=[],i.forEach((t=>{const o=t.geometry;t.properties;"LineString"===o.type&&o.coordinates.forEach((t=>{const o=new a.Point(t[0],t[1]),r=a.Projection.convertEPSG3857ToWGS84GEO(o),n=new a.LatLng(r._lat,r._lng);e.push(n)}))})),d(e)}catch(s){console.error("경로 검색 중 오류 발생:",s)}},w=async t=>{const n=[33.433944015499456,126.43602130714433],s=[33.45120886113757,126.48765563964844],i="126.39573248492509,33.47190207955216_126.44226001173622,33.47486469122896_126.42766879469521,33.48001928930712";try{const c=await(0,r.N7)(String(n[1]),String(n[0]),String(s[1]),String(s[0]),i);o.length>0&&(o.forEach((t=>t.setMap(null))),o=[]),e=[],c.forEach((o=>{const r=o.geometry,n=o.properties;if("LineString"===r.type)r.coordinates.forEach((t=>{const o=new a.Point(t[0],t[1]),r=a.Projection.convertEPSG3857ToWGS84GEO(o),n=new a.LatLng(r._lat,r._lng);e.push(n)}));else if("GP"!==n.pointType&&n.pointType.includes("PP")){const e=new a.Point(r.coordinates[0],r.coordinates[1]),o=a.Projection.convertEPSG3857ToWGS84GEO(e);new a.Marker({position:new a.LatLng(o._lat,o._lng),icon:u["location"],map:t.value})}})),d(e)}catch(c){console.error("경로 검색 중 오류 발생:",c)}},y=(e,o)=>{if(t.value)if(isNaN(e)||isNaN(o))console.error("유효하지 않은 좌표:",e,o);else{const r=new a.LatLng(e,o);t.value.setCenter(r),t.value.setZoom(15)}},k=async()=>{try{const e=await p(),{latitude:o,longitude:r}=e.coords,n=new a.LatLng(o,r);new a.Marker({position:n,icon:u["now"],map:t.value}),y(o,r)}catch(e){console.error(e),alert("현재 위치를 가져오는 데 실패했습니다.");const t=33.50712081595116,o=126.49340629577637;y(t,o)}};return{initTmap:g,removeMarker:h,searchRoutes:f,addMarker:m,clearMarkers:l,checkDuplMarker:v,moveLocation:y,moveNowLocation:k,searchRoutesTest:w}}},3465:function(t,e,o){o.r(e),o.d(e,{default:function(){return y}});o(4114);var r=o(6768),n=o(144),a=o(9623),s=o(2893),i=o(2429),c=o(1397),u=o(7084),l=o(5234);const d=t=>((0,r.Qi)("data-v-f3b3d2cc"),t=t(),(0,r.jt)(),t),p={class:"container"},g={class:"search-map"},h=d((()=>(0,r.Lk)("div",{id:"map_div"},null,-1))),v={class:"result-content"};var m=(0,r.pM)({__name:"SearchCourse",setup(t){const e=(0,u.i)(),{showSearch:o,showNowMap:d,showAllCourse:m,selectCourse:f}=(0,l.bP)(e),w=(0,n.KR)(null),{initTmap:y,moveNowLocation:k,searchRoutesTest:R}=(0,a.k)(w);(0,r.sV)((async()=>{await y(w),await k()}));const C=()=>{k()},j=async()=>{e.updateData("showAllCourse",!0)},L=()=>{f.value?e.updateData("selectCourse",!1):e.updateData("showNowMap",!1)},A=()=>{e.updateData("showNowMap",!0)},_=()=>{s.A.push({name:"create-course"})};return(t,e)=>((0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",p,[(0,r.Lk)("div",g,[h,(0,n.R1)(d)&&!(0,n.R1)(o)?((0,r.uX)(),(0,r.Wv)((0,n.R1)(i.oq),{key:0,onClick:L})):(0,r.Q3)("",!0),(0,n.R1)(o)?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)((0,n.R1)(i.FY),{key:1,onClick:A})),(0,r.bF)((0,n.R1)(i.vd)),(0,n.R1)(d)?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)((0,n.R1)(i.mK),{key:2,onClick:C})),(0,n.R1)(d)?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)((0,n.R1)(i.Ro),{key:3,onClick:j})),(0,n.R1)(d)?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)((0,n.R1)(i.eC),{key:4,onClick:_})),(0,n.R1)(d)?((0,r.uX)(),(0,r.Wv)((0,n.R1)(c.o),{key:5},{default:(0,r.k6)((()=>[(0,r.Lk)("div",v,[(0,n.R1)(f)?((0,r.uX)(),(0,r.Wv)((0,n.R1)(i.SE),{key:1})):((0,r.uX)(),(0,r.Wv)((0,n.R1)(i.uj),{key:0}))])])),_:1})):(0,r.Q3)("",!0)])]),(0,n.R1)(m)?((0,r.uX)(),(0,r.Wv)((0,n.R1)(i.jv),{key:0})):(0,r.Q3)("",!0)],64))}}),f=o(1241);const w=(0,f.A)(m,[["__scopeId","data-v-f3b3d2cc"]]);var y=w}}]);
//# sourceMappingURL=7639.df8737b5.js.map